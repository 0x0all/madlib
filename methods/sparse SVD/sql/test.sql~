---------------------------------------------------------------
-- SVD sprase unit test: main
---------------------------------------------------------------
set client_min_messages=warning;

-- Pick a test to run: Random or Sequential Sparse; and creat a test table
--SELECT madlib_svdsparse_test.Generate_Random(10000, 10000, 100);
SELECT madlib_svdsparse_test.Generate_Sparse(10000, 10000, 100);

-- Run SVD decomposition on 3 main features
EXPLAIN ANALYZE SELECT madlib.SVD_run('test'::text, 'col_num'::text, 'row_num'::text, 'val'::text, 3);

-- Display portion of the results
SELECT * FROM madlib_svdsparse_test.matrix_s ORDER BY col_num ORDER BY col_num, row_num LIMIT 100;
SELECT * FROM madlib_svdsparse_test.matrix_d ORDER BY row_num ORDER BY row_num, col_num LIMIT 100;