-- Example usage for regression:
-- \i online_sv.sql_in
select madlib.svm_generate_reg_data('madlib.svm_train_data', 1000, 5);
 svm_generate_reg_data 
-----------------------
 
(1 row)

select madlib.svm_regression('madlib.svm_train_data', 'myexp', false);
                                svm_regression                                
------------------------------------------------------------------------------
 Finished support vector regression learning on madlib.svm_train_data table. 
            
(1 row)

select madlib.svm_predict('myexp', '{1,2,4,20,10}') > 0;
 ?column? 
----------
 t
(1 row)

select madlib.svm_predict('myexp', '{1,2,4,20,-10}') < 0;
 ?column? 
----------
 t
(1 row)

   
-- To learn multiple support vector regression models
select madlib.svm_regression('madlib.svm_train_data', 'myexp', true);
                                svm_regression                                
------------------------------------------------------------------------------
 Finished support vector regression learning on madlib.svm_train_data table. 
            
(1 row)

select pred.prediction > 0 from madlib.svm_predict_combo('myexp', '{1,2,4,20,10}') as pred;
 ?column? 
----------
 t
 t
 t
(3 rows)

-- Example usage for classification:
select madlib.svm_generate_cls_data('madlib.svm_train_data', 1000, 2);
 svm_generate_cls_data 
-----------------------
 
(1 row)

select madlib.svm_classification('madlib.svm_train_data', 'myexpc', false);
                                svm_classification                                
----------------------------------------------------------------------------------
 Finished support vector classification learning on madlib.svm_train_data table. 
            
(1 row)

select madlib.svm_predict('myexpc', '{10,-20}') > 0;
 ?column? 
----------
 t
(1 row)

select madlib.svm_predict('myexpc', '{-10,20}') < 0;
 ?column? 
----------
 t
(1 row)

-- To learn multiple support vector models, replace the above by 
select madlib.svm_classification('madlib.svm_train_data', 'myexpc', true);
                                svm_classification                                
----------------------------------------------------------------------------------
 Finished support vector classification learning on madlib.svm_train_data table. 
            
(1 row)

select pred.prediction > 0 from madlib.svm_predict_combo('myexpc', '{10,-20}') as pred;
 ?column? 
----------
 t
 t
 t
(3 rows)

select pred.prediction < 0 from madlib.svm_predict_combo('myexpc', '{-10,20}') as pred;
 ?column? 
----------
 t
 t
 t
(3 rows)

-- Example usage for novelty detection:
select madlib.svm_generate_nd_data('madlib.svm_train_data', 500, 2);
 svm_generate_nd_data 
----------------------
 
(1 row)

select madlib.svm_novelty_detection('madlib.svm_train_data', 'myexpnd', false);
                                svm_novelty_detection                                
-------------------------------------------------------------------------------------
 Finished support vector novelty detection learning on madlib.svm_train_data table. 
            
(1 row)

select madlib.svm_predict('myexpnd', '{10,-5}') > 0;  
 ?column? 
----------
 t
(1 row)

select madlib.svm_predict('myexpnd', '{-1,-1}') < 0;  
 ?column? 
----------
 t
(1 row)

