-- Example usage for regression:
-- \i online_sv.sql_in

select MADLIB_SCHEMA.svm_generate_reg_data('MADLIB_SCHEMA.svm_train_data', 1000, 5);
select MADLIB_SCHEMA.svm_regression('MADLIB_SCHEMA.svm_train_data', 'myexp', false, 'MADLIB_SCHEMA.svm_dot');
select MADLIB_SCHEMA.svm_predict('myexp', '{1,2,4,20,10}', 'MADLIB_SCHEMA.svm_dot') > 0;
select MADLIB_SCHEMA.svm_predict('myexp', '{1,2,4,20,-10}', 'MADLIB_SCHEMA.svm_dot') < 0;

   
-- To learn multiple support vector regression models
select MADLIB_SCHEMA.svm_regression('MADLIB_SCHEMA.svm_train_data', 'myexp', true, 'MADLIB_SCHEMA.svm_dot');
select pred.prediction > 0 from MADLIB_SCHEMA.svm_predict_combo('myexp', '{1,2,4,20,10}', 'MADLIB_SCHEMA.svm_dot') as pred;

-- Example usage for classification:
select MADLIB_SCHEMA.svm_generate_cls_data('MADLIB_SCHEMA.svm_train_data', 1000, 2);
select MADLIB_SCHEMA.svm_classification('MADLIB_SCHEMA.svm_train_data', 'myexpc', false, 'MADLIB_SCHEMA.svm_dot');
select MADLIB_SCHEMA.svm_predict('myexpc', '{10,-20}', 'MADLIB_SCHEMA.svm_dot') > 0;
select MADLIB_SCHEMA.svm_predict('myexpc', '{-10,20}', 'MADLIB_SCHEMA.svm_dot') < 0;


-- To learn multiple support vector models, replace the above by 
select MADLIB_SCHEMA.svm_classification('MADLIB_SCHEMA.svm_train_data', 'myexpc', true, 'MADLIB_SCHEMA.svm_dot');
select pred.prediction > 0 from MADLIB_SCHEMA.svm_predict_combo('myexpc', '{10,-20}', 'MADLIB_SCHEMA.svm_dot') as pred;
select pred.prediction < 0 from MADLIB_SCHEMA.svm_predict_combo('myexpc', '{-10,20}', 'MADLIB_SCHEMA.svm_dot') as pred;

-- Example usage for novelty detection:
select MADLIB_SCHEMA.svm_generate_nd_data('MADLIB_SCHEMA.svm_train_data', 500, 2);
select MADLIB_SCHEMA.svm_novelty_detection('MADLIB_SCHEMA.svm_train_data', 'myexpnd', false, 'MADLIB_SCHEMA.svm_dot');
select MADLIB_SCHEMA.svm_predict('myexpnd', '{10,-5}', 'MADLIB_SCHEMA.svm_dot') > 0;  
select MADLIB_SCHEMA.svm_predict('myexpnd', '{-1,-1}', 'MADLIB_SCHEMA.svm_dot') < 0;  

